blueprint:
  name: Tibber normal to low prices, AVG price Turn on SmartThingDevice
  description: 'This automation blueprint turns on smarthing climate device when energy price is normal.'
  domain: automation
  input:
    energy_sensor:
      name: Tibber price sensor
      selector:
        entity:
          integration: tibber
          domain: sensor
      default: ''
    climate_entity:
      name: Device to Turn On
      selector:
          entity:
            domain: climate
     sensor_entity:
      name: Sensor to Have Conditions On
      selector:
          entity:
            domain: sensor
      
mode: single
max_exceeded: silent
variables:
  energy_sensor: !input 'energy_sensor'
  energy_sensor_state: '{{ float(states[energy_sensor].state)}}'
  energy_sensor_avg: '{{ float(states[energy_sensor].attributes[''avg_price''])}}'
trigger:
  platform: state
  entity_id: !input 'energy_sensor'
condition:
alias:"Between -20 and 19 degress"
- condition: template
condition: and
conditions:
  value_template: '{{energy_sensor_state < energy_sensor_avg}}'
- condition: numeric_state 
  entity_id: !input sensor_entity
    above: -20
    below: 19
action:
  - service: climate.turn_on
    target: 
      entity_id: !input climate_entity
